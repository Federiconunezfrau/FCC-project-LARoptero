/*
 * observer.h
 *
 *  Created on: Feb 10, 2024
 *      Author: fede
 */

#ifndef INC_OBSERVER_H_
#define INC_OBSERVER_H_

#include <stdint.h>

#define MAX_NUM_OBSERVERS 5

typedef struct subject_t subject_t;
typedef void (*notificationHandle_t)(void*, subject_t*);

typedef struct
{
	void *mObserver_;
	notificationHandle_t mCallback_;
	uint8_t mInUse_;
} observer_t;

typedef struct
{
	observer_t *observers[MAX_NUM_OBSERVERS];
} subject_t;




void subject_constructor ( subject_t * );
void subject_destructor  ( subject_t * );
void subject_attach      ( subject_t *, void*, notificationHandle_t );
void subject_dettach     ( subject_t *, void*, notificationHandle_t );

#endif /* INC_OBSERVER_H_ */
